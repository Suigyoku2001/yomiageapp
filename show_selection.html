<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>選択内容の表示</title>
    <style>
        /* 全体のレイアウト */
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #eaf8e2; /* 背景色を緑系に */
        }

        /* 選択結果の表示エリア */
        .selectedOption {
            writing-mode: vertical-rl; /* 縦書き・右から左 */
            text-align: center; /* 文字を中央に配置 */
            font-size: 24px; /* 文字サイズ調整 */
            height: 300px; /* 表示エリアの高さ */
            display: flex;
            flex-direction: column; /* 文字を縦に並べる */
            justify-content: center;
            align-items: center;
            border: 2px solid #28a745; /* 枠線の色を緑に */
            padding: 20px;
            background-color: #ffffff; /* 背景色は白 */
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* 影 */
            width: 200px; /* 幅の調整 */
        }

        .char {
            display: block; /* 1文字ずつ改行 */
        }

        /* ボタンのスタイル */
        button {
            background-color: #28a745; /* ボタン背景色を緑に */
            color: white;
            font-size: 18px;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #218838; /* ホバー時に少し暗い緑 */
        }

        /* 現在の進行状況表示 */
        #selectionIndex {
            font-size: 18px;
            margin-top: 10px;
            color: #333;
        }
    </style>
</head>
<body>

    <!-- 選択内容の表示 -->
    <div class="selectedOption"></div>

    
    <!-- 現在の進行状況表示 -->
    <div id="selectionIndex">- / -</div>

    <!-- 前へ・次へボタン -->
    <button id="prevBtn" onclick="changeSelection(-1)" disabled>前へ</button>
    <button id="nextBtn" onclick="changeSelection(1)">次へ</button><br><br>

    <button onclick="window.location.href='index.html'">スタート画面に戻る</button>

    <script>
        // ローカルストレージから選択された内容を取得
        let selectedOptions = JSON.parse(localStorage.getItem('selectedOptions')) || [];

        const fruits = {
            0: ["なにはずに","さくやこのはな","ふゆごもり","いまをはるべと","さくやこのはな"],
            1: ["あきのたの","かりほのいほの","とまをあらみ","わがころもでは","つゆにぬれつつ"],
            2: ["はるすぎて","なつきにけらし","しろたへの","ころもほすてふ","あまのかぐやま"],
            3: ["あしびきの","やまどりのをの","しだりをの","ながながしよを","ひとりかもねむ"],
            4:["たごのうらに","うちいでてみれば","しろたへの","ふじのたかねに","ゆきはふりつつ"],
            5:["おくやまに","もみぢふみわけ","なくしかの","こえきくときぞ","あきはかなしき"],
            6:["かささぎの","わたせるはしに","おくしもの","しろきをみれば","よぞふけにける"],
            7:["あまのはら","ふりさけみれば","かすがなる","みかさのやまに","いでしつきかも"],
            8:["わがいほは","みやこのたつみ","しかぞすむ","よをうぢやまと","ひとはいふなり"],
            9:["はなのいろは","うつりにけりな","いたづらに","わがみよにふる","ながめせしまに"],
            10:["これやこの","ゆくもかへるも","わかれては","しるもしらぬも","あふさかのせき"],
            11:["わたのはら","やそしまかけて","こぎいでぬと","ひとにはつげよ","あまのつりぶね"],
            12:["あまつかぜ","くものかよひぢ","ふきとぢよ","をとめのすがた","しばしとどめむ"],
            13:["つくばねの","みねよりおつる","みなのがは","こひぞつもりて","ふちとなりぬる"],
            14:["みちのくの","しのぶもぢずり","たれゆゑに","みだれそめにし","われならなくに"],
            15:["きみがため","はるののにいでて","わかなつむ","わがころもでに","ゆきはふりつつ"],
            16:["たちわかれ","いなばのやまの","みねにおふる","まつとしきかば","いまかへりこむ"],
            17:["ちはやぶる","かみよもきかず","たつたがは","からくれなゐに","みづくくるとは"],
            18:["すみのえの","きしによるなみ","よるさへや","ゆめのかよひぢ","ひとめよくらむ"],
            19:["なにはがた","みじかきあしの","ふしのまも","あはでこのよを","すぐしてよとや"],
            20:["わびぬれば","いまはたおなじ","なにはなる","みをつくしても","あはむとぞおもふ"],
            21:["いまこむと","いひしばかりに","ながつきの","ありあけのつきを","まちいでつるかな"],
            22:["ふくからに","あきのくさきの","しをるれば","むべやまかぜを","あらしといふらむ"],
            23:["つきみれば","ちぢにものこそ","かなしけれ","わがみひとつの","あきにはあらねど"],
            24:["このたびは","ぬさもとりあへず","たむけやま","もみぢのにしき","かみのまにまに"],
            25:["なにしおはば","あふさかやまの","さねかづら","ひとにしられで","くるよしもがな"],
            26:["をぐらやま","みねのもみぢば","こころあらば","いまひとたびの","みゆきまたなむ"],
            27:["みかのはら","わきてながるる","いづみがは","いつみきとてか","こひしかるらむ"],
            28:["やまざとは","ふゆぞさびしさ","まさりける","ひとめもくさも","かれぬとおもへば"],
            29:["こころあてに","をらばやをらむ","はつしもの","おきまどはせる","しらぎくのはな"],
            30:["ありあけの","つれなくみえし","わかれより","あかつきばかり","うきものはなし"],
            31:["あさぼらけ","ありあけのつきを","みるまでに","よしののさとに","ふれるしらゆき"],
            32:["やまがはに","かぜのかけたる","しがらみは","ながれもあへぬ","もみぢなりけり"],
            33:["ひさかたの","ひかりのどけき","はるのひに","しづごころなく","はなのちるらむ"],
            34:["たれをかも","しるひとにせむ","たかさごの","まつもむかしの","ともならなくに"],
            35:["ひとはいさ","こころもしらず","ふるさとは","はなぞむかしの","かににほひける"],
            36:["なつのよは","まだよひながら","あけぬるを","くものいづこに","つきやどるらむ"],
            37:["しらつゆに","かぜのふきしく","あきののは","つらぬきとめぬ","たまぞちりける"],
            38:["わすらるる","みをばおもはず","ちかひてし","ひとのいのちの","をしくもあるかな"],
            39:["あさぢふの","をののしのはら","しのぶれど","あまりてなどか","ひとのこひしき"],
            40:["しのぶれど","いろにいでにけり","わがこひは","ものやおもふと","ひとのとふまで"],
            41:["こひすてふ","わがなはまだき","たちにけり","ひとしれずこそ","おもひそめしか"],
            42:["ちぎりきな","かたみにそでを","しぼりつつ","すゑのまつやま","なみこさじとは"],
            43:["あひみての","のちのこころに","くらぶれば","むかしはものを","おもはざりけり"],
            44:["あふことの","たえてしなくば","なかなかに","ひとをもみをも","うらみざらまし"],
            45:["あはれとも","いふべきひとは","おもほえで","みのいたづらに","なりぬべきかな"],
            46:["ゆらのとを","わたるふなびと","かぢをたえ","ゆくへもしらぬ","こひのみちかな"],
            47:["やへむぐら","しげれるやどの","さびしきに","ひとこそみえね","あきはきにけり"],
            48:["かぜをいたみ","いはうつなみの","おのれのみ","くだけてものを","おもふころかな"],
            49:["みかきもり","ゑじのたくひの","よるはもえ","ひるはきえつつ","ものをこそおもへ"],
            50:["きみがため","をしからざりし","いのちさへ","ながくもがなと","おもひけるかな"],
            51:["かくとだに","えやはいぶきの","さしもぐさ","さしもしらじな","もゆるおもひを"],
            52:["あけぬれば","くるるものとは","しりながら","なほうらめしき","あさぼらけかな"],
            53:["なげけとて","つきやはものを","おもはする","かこちがほなる","わがなみだかな"],
            54:["わすれじの","ゆくすゑまでは","かたければ","けふをかぎりの","いのちともがな"],
            55:["たきのおとは","たえてひさしく","なりぬれど","なこそながれて","なほきこえけれ"],
            56:["あらざらむ","このよのほかの","おもひでに","いまひとたびの","あふこともがな"],
            57:["めぐりあひて","みしやそれとも","わかぬまに","くもがくれにし","よはのつきかな"],
            58:["ありまやま","ゐなのささはら","かぜふけば","いでそよひとを","わすれやはする"],
            59:["やすらはで","ねなましものを","さよふけて","かたぶくまでの","つきをみしかな"],
            60:["おほえやま","いくののみちの","とほければ","まだふみもみず","あまのはしだて"],
            61:["いにしへの","ならのみやこの","やへざくら","けふここのへに","にほひぬるかな"],
            62:["よをこめて","とりのそらねは","はかるとも","よにあふさかの","せきはゆるさじ"],
            63:["いまはただ","おもひたえなむ","とばかりを","ひとづてならで","いふよしもがな"],
            64:["あさぼらけ","うぢのかわぎり","たえだえに","あらはれわたる","せぜのあじろぎ"],
            65:["うらみわび","ほさぬそでだに","あるものを","こひにくちなむ","なこそをしけれ"],
            66:["もろともに","あはれとおもへ","やまざくら","はなよりほかに","しるひともなし"],
            67:["はるのよの","ゆめばかりなる","たまくらに","かひなくたたむ","なこそをしけれ"],
            68:["こころにも","あらでうきよに","ながらへば","こひしかるべき","よはのつきかな"],
            69:["あらしふく","みむろのやまの","もみぢばは","たつたのかはの","にしきなりけり"],
            70:["さびしさに","やどをたちいでて","ながむれば","いづくもおなじ","あきのゆふぐれ"],
            71:["ゆふされば","かどたのいなば","おとづれて","あしのまろやに","あきかぜぞふく"],
            72:["おとにきく","たかしのはまの","あだなみは","かけじやそでの","ぬれもこそすれ"],
            73:["たかさごの","をのへのさくら","さきにけり","とやまのかすみ","たたずもあらなむ"],
            74:["うかりける","ひとをはつせの","やまおろしよ","はげしかれとは","いのらぬものを"],
            75:["ちぎりおきし","させもがつゆを","いのちにて","あはれことしの","あきもいぬめり"],
            76:["わたのはら","こぎいでてみれば","ひさかたの","くもゐにまがふ","おきつしらなみ"],
            77:["せをはやみ","いはにせかるる","たきがはの","われてもすゑに","あはむとぞおもふ"],
            78:["あはぢしま","かよふちどりの","なくこゑに","いくよねざめぬ","すまのせきもり"],
            79:["あきかぜに","たなびくくもの","たえまより","もれいづるつきの","かげのさやけさ"],
            80:["ながからむ","こころもしらず","くろかみの","みだれてけさは","ものをこそおもへ"],
            81:["ほととぎす","なきつるかたを","ながむれば","ただありあけの","つきぞのこれる"],
            82:["おもひわび","さてもいのちは","あるものを","うきにたへぬは","なみだなりけり"],
            83:["よのなかよ","みちこそなけれ","おもひいる","やまのおくにも","しかぞなくなる"],
            84:["ながらへば","またこのごろや","しのばれむ","うしとみしよぞ","いまはこひしき"],
            85:["よもすがら","ものおもふころは","あけやらで","ねやのひまさへ","つれなかりけり"],
            86:["なげけとて","つきやはものを","おもはする","かこちがほなる","わがなみだかな"],
            87:["むらさめの","つゆもまだひぬ","まきのはに","きりたちのぼる","あきのゆふぐれ"],
            88:["なにはえの","あしのかりねの","ひとよゆゑ","みをつくしてや","こひわたるべき"],
            89:["たまのおよ","たえなばたえね","ながらへば","しのぶることの","よわりもぞする"],
            90:["みせばやな","おじまのあまの","そでだにも","ぬれにぞぬれし","いろはかはらず"],
            91:["きりぎりす","なくやしもよの","さむしろに","ころもかたしき","ひとりかもねむ"],
            92:["わがそでは","しほひにみえぬ","おきのいしの","ひとこそしらね","かわくまもなし"],
            93:["よのなかは","つねにもがもな","なぎさこぐ","あまのをぶねの","つなでかなしも"],
            94:["みよしのの","やまのあきかぜ","さよふけて","ふるさとさむく","ころもうつなり"],
            95:["おほけなく","うきよのたみに","おほふかな","わがたつそまに","すみぞめのそで"],
            96:["はなさそふ","あらしのにはの","ゆきならで","ふりゆくものは","わがみなりけり"],
            97:["こぬひとを","まつほのうらの","ゆふなぎに","やくやもしほの","みもこがれつつ"],
            98:["かぜそよぐ","ならのをがはの","ゆふぐれは","みそぎぞなつの","しるしなりける"],
            99:["ひともをし","ひともうらめし","あじきなく","よをおもふゆゑに","ものおもふみは"],
            100:["ももしきや","ふるきのきばの","しのぶにも","なほあまりある","むかしなりけり"]
        };

        // シャッフル処理（Fisher-Yatesアルゴリズム）
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // 要素を入れ替え
            }
        }

        // 選択されたリストが存在する場合のみシャッフル
        if (selectedOptions.length > 0) {
            shuffleArray(selectedOptions);
        }

        let displayPlaceholder = true; // 最初は「リストを表示する」を表示
        let currentIndex = -1; // 初期状態ではリストを表示しない

        function showSelection() {
            const displayElement = document.getElementsByClassName('selectedOption');
            const indexElement = document.getElementById('selectionIndex');

            if (displayPlaceholder) {
                displayElement[0].innerHTML = fruits[0].map(char => `<div class="char">${char}</div>`).join("");  // 改行を<div>で実現
                indexElement.textContent = "- / -";
                document.getElementById('prevBtn').disabled = true;
                document.getElementById('nextBtn').disabled = false;
            } else if (selectedOptions.length > 0) {
                const key = selectedOptions[currentIndex];
                if (fruits[key]) {
                    // 各文字を <div> にして表示
                    for (let i = 0; i < displayElement.length; i++) {
                        displayElement[i].innerHTML = fruits[key].map(char => `<div class="char">${char}</div>`).join("");
                    }
                    indexElement.textContent = `${currentIndex + 1} / ${selectedOptions.length}`; // 何番目か表示
                } else {
                    displayElement[0].textContent = "無効な選択肢";
                    indexElement.textContent = "- / -";
                }
                toggleNavigationButtons();
            } else {
                displayElement[0].textContent = "何も選択されていません。";
                indexElement.textContent = "- / -";
                document.getElementById('prevBtn').disabled = true;
                document.getElementById('nextBtn').disabled = true;
            }
        }

        function changeSelection(direction) {
            if (displayPlaceholder) {
                displayPlaceholder = false;
                currentIndex = 0; // 最初の要素を表示
            } else {
                currentIndex += direction;
                if (currentIndex < 0) currentIndex = selectedOptions.length - 1;
                if (currentIndex >= selectedOptions.length) currentIndex = 0;
            }
            showSelection();
        }

        function toggleNavigationButtons() {
            document.getElementById('prevBtn').disabled = currentIndex === 0;
            document.getElementById('nextBtn').disabled = currentIndex === selectedOptions.length - 1;
        }

        // ページ読み込み時に最初の選択を表示
        showSelection();
    </script>

</body>
</html>
